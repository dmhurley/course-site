<div id="timer">
	<div id="timer-time">
	</div>
		<script>
		function Timer(duration, start, end) {
			this.duration = duration;
			this.end = new Date(end*1000);
			this.start = new Date(start*1000);
			this.updateTime = function() {
					var now = new Date();
					var ttLate = (this.start.valueOf() - now.valueOf())/1000/60 + duration;
					var ttEnd = (this.end.valueOf() - now.valueOf())/1000/60;

					var timeleft = Math.min(ttLate, ttEnd);

					if (timeleft >= 0) {
						minutes = Math.floor(timeleft);
					} else {
						minutes ="-" + Math.abs(Math.floor(timeleft) + 1);
					}
					seconds = Math.abs(Math.floor((timeleft%1)*60));
					document.getElementById('timer-time').innerHTML = minutes + ":" + (seconds%10===seconds?"0"+seconds:seconds);
				}
			this.interval = setInterval(
					(function(self) {
						return function() {
							self.updateTime();
						}
					})(this), 300);
			this.updateTime();
		}
		timer = new Timer({{duration}} ,"{{start}}", "{{end}}");
	</script>
</div>
