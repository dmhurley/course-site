<div id="timer">
		<script>
		function Timer(duration, start, end) {
			this.duration = duration;
			var ends = end.split(':');
			this.end = new Date(ends[0], ends[1] - 1, ends[2], ends[3], ends[4], ends[5]);
			var starts = start.split(':');
			this.date = new Date(starts[0], starts[1] - 1, starts[2], starts[3], starts[4], starts[5]);
			this.updateTime = function() {
					var now = new Date();
					var ttLate = (this.date.valueOf() - now.valueOf())/1000/60 + duration;
					var ttEnd = (this.end.valueOf() - now.valueOf())/1000/60;

					var timeleft = Math.min(ttLate, ttEnd);

					if (timeleft >= 0) {
						minutes = Math.floor(timeleft);
					} else {
						minutes ="-" + Math.abs(Math.floor(timeleft) + 1);
					}
					seconds = Math.abs(Math.floor((timeleft%1)*60));
					document.getElementById('timer').innerHTML = minutes + ":" + (seconds%10===seconds?"0"+seconds:seconds);
				}
			this.interval = setInterval(
					(function(self) {
						return function() {
							self.updateTime();
						}
					})(this), 300);
			this.updateTime();
		}
		timer = new Timer({{duration}} ,"{{start}}", "{{end}}");
	</script>
</div>
