{% extends 'BioDataBundle:Crud:all.json.twig' %}

{% macro view(f) %}
	{% for child in f %}{% if loop.index > 1 %}, {% endif %}{
		"id": "{{child.vars.id}}",
		"errors": [{%if child.vars.errors is defined%}{% for error in child.vars.errors %}
			{% if loop.index > 1 %},{% endif %}
			"{{error.message}}"
		{% endfor %}{% endif %}],
		{% if child.count > 1 %}
		"children": [{{_self.view(child)}}]
		{% else %}
		"value": {{child.vars.value|json_encode|raw}}
		{% endif %}
	}{% endfor %}
{% endmacro %}

{% import _self as a %}

{% block form %}
	[{% if form is defined %}
		{{a.view(form)}}
	{% endif %}]
{% endblock %}
