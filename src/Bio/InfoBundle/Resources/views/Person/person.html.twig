{% extends 'BioPublicBundle:Template:rowForm.html.twig' %}

{% block content %}
	<table>
		<thead>
			<tr>
				<th>First - Last</th>
				<th>Email</th>
				<th>Building</th>
				<th>Room</th>
				<th>Title</th>
				<th>Edit</th>
				<th>Delete</th>
			</tr>
		</thead>
		<tbody>

		</tbody>
		<tfoot>
			<tr>
				<td colspan=7 class="link add lonely">add person</td>
			</tr>
		</tfoot>
	</table>
{% endblock %}

{% block java %}
	<script>
	var loader = new Loader({
		'url': '{{ url('main_page')}}crud/',
		'bundle': 'info',
		'entity': 'person',
		'table' : {
			'sortFn': function(dataA, dataB) {
				return dataA.f_name > dataB.f_name;
			}
		},
		'columns': {
			'f_name': null,
			'l_name': function(value, cell) {
				cell.previousSibling.innerHTML = cell.previousSibling.innerHTML + ' ' + value;
				return undefined;
			},
			'email': function(value, cell) {
				return '<a href="mailto:'+value+'">'+ value + '</a>';
			},
			'bldg': function(value, cell) {
				if (value) {
					return value;
				} else {
					return '-';
				}
			},
			'room': function(value, cell) {
				if (value) {
					return value;
				} else {
					return '-';
				}
			},
			'title': null
		}
	}); </script>
{% endblock %}