{% extends 'BioPublicBundle::main.html.twig' %}

{% block head %}
	{{parent()}}
	{% javascripts 'bundles/bioexam/js/Loader.js' 'bundles/bioexam/js/Parser.js' output="js/*.js" %}
			<script src="{{asset_url}}"></script>
	{% endjavascripts %}
{% endblock %}


{% block content %}
	<div class="form_layer">
		<div class="form_container">
			<div class="form_scroller">
				{{ form(form) }}
			</div>
			<div class="form_exit"></div>
		</div>
	</div>

	<table>
		<thead>
			<tr>
				<th>Name</th>
				<th>When</th>
				<th>Where</th>
				<th>Edit</th>
			</tr>
		</thead>

		<tbody>
			
		</tbody>

		<tfoot>
			<tr>
				<td colspan=6 class="link add lonely">add course section</td>
			</tr>
		</tfoot>
	</table>
{% endblock %}

{% block java %}
	<script>
	var loader = new Loader({
		'url': '{{ url('main_page')}}crud/',
		'bundle': 'info',
		'entity': 'courseSection',
		'table' : {
			'sortFn': function(dataA, dataB) {
				return dataA.name > dataB.name;
			}
		},
		'buttons': {
			'delete': undefined
		},
		'columns': {
			'name': null,
			'days': function(value, cell) {
				return value.join(', ').toUpperCase() + ': ';
			},
			'start_time': function(value, cell) {
				cell.previousSibling.innerHTML = cell.previousSibling.innerHTML + (new Date(value*1000)).toLocaleTimeString() + ' - ';
				return undefined;
			},
			'end_time': function(value, cell) {
				cell.previousSibling.innerHTML = cell.previousSibling.innerHTML + (new Date(value*1000)).toLocaleTimeString();
				return undefined;
			},
			'bldg': null,
			'room': function(value, cell) {
				cell.previousSibling.innerHTML = cell.previousSibling.innerHTML + ' #' + value;
				return undefined;
			}
		}
	}); </script>
{% endblock %}